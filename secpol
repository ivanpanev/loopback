{
  "changed": false,
  "rc": 1,
  "stdout": "[8989898] Starting script execution.\nGon Get API Key.\nUsername: t3-admin, password: Px3Kx[8SxN\nTrying to get\n",
  "stdout_lines": [
    "[8989898] Starting script execution.",
    "Gon Get API Key.",
    "Username: t3-admin, password: asd346363463",
    "Trying to get"
  ],
  "stderr": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connection.py\", line 174, in _new_conn\n    conn = connection.create_connection(\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py\", line 95, in create_connection\n    raise err\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py\", line 85, in create_connection\n    sock.connect(sa)\nOSError: [Errno 101] Network is unreachable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 715, in urlopen\n    httplib_response = self._make_request(\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 404, in _make_request\n    self._validate_conn(conn)\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 1060, in _validate_conn\n    conn.connect()\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connection.py\", line 363, in connect\n    self.sock = conn = self._new_conn()\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connection.py\", line 186, in _new_conn\n    raise NewConnectionError(\nurllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.9/site-packages/requests/adapters.py\", line 667, in send\n    resp = conn.urlopen(\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 801, in urlopen\n    retries = retries.increment(\n  File \"/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py\", line 594, in increment\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='100.66.31.9', port=443): Max retries exceeded with url: /api?type=keygen&user=t3-admin&password=Px3Kx%5B8SxN (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 67, in get_api_key\n    response = requests.get(url, params=params, verify=False)\n  File \"/usr/local/lib/python3.9/site-packages/requests/api.py\", line 73, in get\n    return request(\"get\", url, params=params, **kwargs)\n  File \"/usr/local/lib/python3.9/site-packages/requests/api.py\", line 59, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"/usr/local/lib/python3.9/site-packages/requests/sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"/usr/local/lib/python3.9/site-packages/requests/sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"/usr/local/lib/python3.9/site-packages/requests/adapters.py\", line 700, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: HTTPSConnectionPool(host='100.66.31.9', port=443): Max retries exceeded with url: /api?type=keygen&user=t3-admin&password=Px3Kx%5B8SxN (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 176, in <module>\n    main()\n  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 104, in main\n    api_key = get_api_key(palo_ip, username, password)\n  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 82, in get_api_key\n    raise Exception(f\"An error occurred during the API Key retreival from device {palo_ip}: {e}\")\nException: An error occurred during the API Key retreival from device 100.66.31.9: HTTPSConnectionPool(host='100.66.31.9', port=443): Max retries exceeded with url: /api?type=keygen&user=t3-admin&password=Px3Kx%5B8SxN (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable'))\n",
  "stderr_lines": [
    "Traceback (most recent call last):",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connection.py\", line 174, in _new_conn",
    "    conn = connection.create_connection(",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py\", line 95, in create_connection",
    "    raise err",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py\", line 85, in create_connection",
    "    sock.connect(sa)",
    "OSError: [Errno 101] Network is unreachable",
    "",
    "During handling of the above exception, another exception occurred:",
    "",
    "Traceback (most recent call last):",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 715, in urlopen",
    "    httplib_response = self._make_request(",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 404, in _make_request",
    "    self._validate_conn(conn)",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 1060, in _validate_conn",
    "    conn.connect()",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connection.py\", line 363, in connect",
    "    self.sock = conn = self._new_conn()",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connection.py\", line 186, in _new_conn",
    "    raise NewConnectionError(",
    "urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable",
    "",
    "During handling of the above exception, another exception occurred:",
    "",
    "Traceback (most recent call last):",
    "  File \"/usr/local/lib/python3.9/site-packages/requests/adapters.py\", line 667, in send",
    "    resp = conn.urlopen(",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py\", line 801, in urlopen",
    "    retries = retries.increment(",
    "  File \"/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py\", line 594, in increment",
    "    raise MaxRetryError(_pool, url, error or ResponseError(cause))",
    "urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='100.66.31.9', port=443): Max retries exceeded with url: /api?type=keygen&user=t3-admin&password=Px3Kx%5B8SxN (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable'))",
    "",
    "During handling of the above exception, another exception occurred:",
    "",
    "Traceback (most recent call last):",
    "  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 67, in get_api_key",
    "    response = requests.get(url, params=params, verify=False)",
    "  File \"/usr/local/lib/python3.9/site-packages/requests/api.py\", line 73, in get",
    "    return request(\"get\", url, params=params, **kwargs)",
    "  File \"/usr/local/lib/python3.9/site-packages/requests/api.py\", line 59, in request",
    "    return session.request(method=method, url=url, **kwargs)",
    "  File \"/usr/local/lib/python3.9/site-packages/requests/sessions.py\", line 589, in request",
    "    resp = self.send(prep, **send_kwargs)",
    "  File \"/usr/local/lib/python3.9/site-packages/requests/sessions.py\", line 703, in send",
    "    r = adapter.send(request, **kwargs)",
    "  File \"/usr/local/lib/python3.9/site-packages/requests/adapters.py\", line 700, in send",
    "    raise ConnectionError(e, request=request)",
    "requests.exceptions.ConnectionError: HTTPSConnectionPool(host='100.66.31.9', port=443): Max retries exceeded with url: /api?type=keygen&user=t3-admin&password=Px3Kx%5B8SxN (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable'))",
    "",
    "During handling of the above exception, another exception occurred:",
    "",
    "Traceback (most recent call last):",
    "  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 176, in <module>",
    "    main()",
    "  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 104, in main",
    "    api_key = get_api_key(palo_ip, username, password)",
    "  File \"/root/.ansible/tmp/ansible-tmp-1745912963.131591-152-227485220006494/main.py\", line 82, in get_api_key",
    "    raise Exception(f\"An error occurred during the API Key retreival from device {palo_ip}: {e}\")",
    "Exception: An error occurred during the API Key retreival from device 100.66.31.9: HTTPSConnectionPool(host='100.66.31.9', port=443): Max retries exceeded with url: /api?type=keygen&user=t3-admin&password=Px3Kx%5B8SxN (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7f71ec0c8700>: Failed to establish a new connection: [Errno 101] Network is unreachable'))"
  ],
  "msg": "non-zero return code",
  "exception": "NoneType: None\n",
  "_ansible_no_log": false,
  "_ansible_delegated_vars": {
    "ansible_host": "10.160.2.22",
    "ansible_port": null,
    "ansible_user": "tier3.global.ip"
  }
}


Here's the result of the "Test TCP 443" task you gave me just now:

{
  "elapsed": 6,
  "msg": "Timeout when waiting for 100.66.31.9:443",
  "invocation": {
    "module_args": {
      "host": "100.66.31.9",
      "port": 443,
      "timeout": 5,
      "state": "started",
      "connect_timeout": 5,
      "delay": 0,
      "active_connection_states": [
        "ESTABLISHED",
        "FIN_WAIT1",
        "FIN_WAIT2",
        "SYN_RECV",
        "SYN_SENT",
        "TIME_WAIT"
      ],
      "sleep": 1,
      "path": null,
      "search_regex": null,
      "exclude_hosts": null,
      "msg": null
    }
  },
  "_ansible_no_log": false,
  "changed": false,
  "_ansible_delegated_vars": {
    "ansible_host": "10.16.2.22",
    "ansible_port": null,
    "ansible_user": "tier3.global.ip"
  }
}

However, I already have another ansible playbook which doens't use any python but is able to run panos anisble galaxy modules from that JH to many firewalls icnluding the 100.66.31.9 one i'm testing with.
